function incrementString($str) {
    if (preg_match('/(.*?)(\d+)$/', $str, $m)) {
        $prefix = $m[1];
        $num = $m[2];
        $num = str_pad($num + 1, strlen($num), '0', STR_PAD_LEFT);
        return $prefix . $num;
    }
    return $str;
}


$string = "This is a test";
$keywords = ['test', 'sample', 'demo'];

$found = array_filter($keywords, fn($w) => strpos($string, $w) !== false);

echo $found ? "found \n" : "not found \n";


==========

You‚Äôre getting this warning:

PHP Warning: Undefined array key "ELECTR"

because this line:

$data[Constants::FUEL_TYPE] = $fuleTypeOptions[$data[Constants::FUEL_TYPE]];


tries to access:

$fuleTypeOptions['ELECTR']


but the key "ELECTR" does not exist in $fuleTypeOptions.

‚úÖ Why it happens in PHP 8.4

In PHP 8.4, using an undefined array key triggers a Warning, not just a Notice.
So if the array key does not exist, you must check before using it.

‚úÖ Fix 1: Check array key before accessing
$fuelKey = $data[Constants::FUEL_TYPE] ?? null;

if (isset($fuleTypeOptions[$fuelKey])) {
    $data[Constants::FUEL_TYPE] = $fuleTypeOptions[$fuelKey];
} else {
    // fallback value
    $data[Constants::FUEL_TYPE] = null; 
}

‚úÖ Fix 2: Use null coalescing operator (short version)

If you want to assign default value when key doesn‚Äôt exist:

$fuelKey = $data[Constants::FUEL_TYPE] ?? null;
$data[Constants::FUEL_TYPE] = $fuleTypeOptions[$fuelKey] ?? null;

üîé Debug: Check what keys exist in $fuleTypeOptions

Add:

// temporary debug
// print_r($fuleTypeOptions);
// echo $data[Constants::FUEL_TYPE];


Maybe Magento is sending "ELECTRIC" but your array has "ELECT" or "ELEC" or something else.

üëç Final Recommendation

Use this safe line:

$data[Constants::FUEL_TYPE] = $fuleTypeOptions[$data[Constants::FUEL_TYPE] ?? ''] ?? null;


This ensures no warning in PHP 8.4, even if the key doesn't exist.

If you want, share your $fuleTypeOptions array and I‚Äôll confirm the correct mapping for "ELECTR".
