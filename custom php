function incrementString($str) {
    if (preg_match('/(.*?)(\d+)$/', $str, $m)) {
        $prefix = $m[1];
        $num = $m[2];
        $num = str_pad($num + 1, strlen($num), '0', STR_PAD_LEFT);
        return $prefix . $num;
    }
    return $str;
}


$string = "This is a test";
$keywords = ['test', 'sample', 'demo'];

$found = array_filter($keywords, fn($w) => strpos($string, $w) !== false);

echo $found ? "found \n" : "not found \n";


==========

Youâ€™re getting this warning:

PHP Warning: Undefined array key "ELECTR"

because this line:

$data[Constants::FUEL_TYPE] = $fuleTypeOptions[$data[Constants::FUEL_TYPE]];


tries to access:

$fuleTypeOptions['ELECTR']


but the key "ELECTR" does not exist in $fuleTypeOptions.

âœ… Why it happens in PHP 8.4

In PHP 8.4, using an undefined array key triggers a Warning, not just a Notice.
So if the array key does not exist, you must check before using it.

âœ… Fix 1: Check array key before accessing
$fuelKey = $data[Constants::FUEL_TYPE] ?? null;

if (isset($fuleTypeOptions[$fuelKey])) {
    $data[Constants::FUEL_TYPE] = $fuleTypeOptions[$fuelKey];
} else {
    // fallback value
    $data[Constants::FUEL_TYPE] = null; 
}

âœ… Fix 2: Use null coalescing operator (short version)

If you want to assign default value when key doesnâ€™t exist:

$fuelKey = $data[Constants::FUEL_TYPE] ?? null;
$data[Constants::FUEL_TYPE] = $fuleTypeOptions[$fuelKey] ?? null;

ðŸ”Ž Debug: Check what keys exist in $fuleTypeOptions

Add:

// temporary debug
// print_r($fuleTypeOptions);
// echo $data[Constants::FUEL_TYPE];


Maybe Magento is sending "ELECTRIC" but your array has "ELECT" or "ELEC" or something else.

ðŸ‘ Final Recommendation

Use this safe line:

$data[Constants::FUEL_TYPE] = $fuleTypeOptions[$data[Constants::FUEL_TYPE] ?? ''] ?? null;


This ensures no warning in PHP 8.4, even if the key doesn't exist.

If you want, share your $fuleTypeOptions array and Iâ€™ll confirm the correct mapping for "ELECTR".



vendor/magento/module-catalog-url-rewrite/Model/Product/Validator.php

vendor/magento/module-catalog-url-rewrite/Model/Storage/DynamicStorage.php -> doFindAllByData



diff --git a/vendor/magento/framework/Webapi/ServiceInputProcessor.php b/vendor/magento/framework/Webapi/ServiceInputProcessor.php
index ba58dc2bc7acf..06919af36d2eb 100644
--- a/vendor/magento/framework/Webapi/ServiceInputProcessor.php
+++ b/vendor/magento/framework/Webapi/ServiceInputProcessor.php
@@ -246,6 +246,13 @@ private function getConstructorData(string $className, array $data): array
             if (isset($data[$parameter->getName()])) {
                 $parameterType = $this->typeProcessor->getParamType($parameter);
 
+                // Allow only simple types or Api Data Objects
+                if (!($this->typeProcessor->isTypeSimple($parameterType)
+                    || preg_match('~\\\\?\w+\\\\\w+\\\\Api\\\\Data\\\\~', $parameterType) === 1
+                )) {
+                    continue;
+                }
+
                 try {
                     $res[$parameter->getName()] = $this->convertValue($data[$parameter->getName()], $parameterType);
                 } catch (\ReflectionException $e) {

vendor/magento/module-url-rewrite/Model/Storage/DbStorage.php -> prepareSelect

